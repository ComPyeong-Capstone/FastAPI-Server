<!DOCTYPE html>
<html>
<head>
  <title>OAuth Login Only</title>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
</head>
<body>
  <h2>🔐 소셜 로그인</h2>

  <!-- ✅ Google 로그인 -->
  <div id="g_id_onload"
       data-client_id="{{ google_client_id }}"
       data-callback="handleGoogleResponse">
  </div>
  <div class="g_id_signin" data-type="standard"></div>

  <!-- ✅ Kakao 로그인 -->
  <button onclick="kakaoLogin()">🟡 Kakao 로그인</button>

  <script>
    // Google 로그인 응답 처리
    async function handleGoogleResponse(response) {
      const idToken = response.credential;
      window.parent.postMessage(JSON.stringify({ provider: "google", token: idToken }), "*");
    }

    Kakao.init("{{ kakao_js_key }}");

    function kakaoLogin() {
      const REDIRECT_URI = "{{ kakao_redirect_uri }}";
      window.location.href = `https://kauth.kakao.com/oauth/authorize?response_type=code&client_id={{ kakao_rest_api_key }}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}`;
    }
  </script>
</body>
</html>
